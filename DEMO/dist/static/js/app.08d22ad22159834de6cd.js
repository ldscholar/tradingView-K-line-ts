webpackJsonp([1],{NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,s=i("7+uW"),r=i("mvHQ"),a=i.n(r),u=i("woOf"),l=i.n(u),d=i("pFYg"),c=i.n(d);n=this,o=function(e){function t(e,n){var o=i({},e);for(var s in n)"object"!=c()(e[s])||null===e[s]||Array.isArray(e[s])?void 0!==n[s]&&(o[s]=n[s]):o[s]=t(e[s],n[s]);return o}var i=l.a||function(e){for(var t,i=arguments,n=1,o=arguments.length;n<o;n++)for(var s in t=i[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},o={width:800,height:500,symbol:"AA",interval:"D",timezone:"UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},s=function(){function e(e){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");if(this._options=t(o,e),e.preset){var i=n[e.preset];i?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(i.disabled_features):this._options.disabled_features=i.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(i.enabled_features):this._options.enabled_features=i.enabled_features):console.warn("Unknown preset: `"+e.preset+"`")}this._create()}return e.prototype.onChartReady=function(e){this._ready?e.call(this):this._readyHandlers.push(e)},e.prototype.onGrayedObjectClicked=function(e){this._innerAPI().onGrayedObjectClicked(e)},e.prototype.onShortcut=function(e,t){this._innerWindow().createShortcutAction(e,t)},e.prototype.subscribe=function(e,t){this._innerAPI().subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._innerAPI().unsubscribe(e,t)},e.prototype.chart=function(e){return this._innerAPI().chart(e)},e.prototype.setLanguage=function(e){this.remove(),this._options.locale=e,this._create()},e.prototype.setSymbol=function(e,t,i){this._innerAPI().changeSymbol(e,t+"",i)},e.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id];var e=this._getIFrameElement();e.contentWindow.destroyChart(),e.parentNode&&e.parentNode.removeChild(e)},e.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},e.prototype.selectLineTool=function(e){this._innerAPI().selectLineTool(e)},e.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},e.prototype.save=function(e){this._innerAPI().saveChart(e)},e.prototype.load=function(e,t){this._innerAPI().loadChart({json:e,extendedData:t})},e.prototype.getSavedCharts=function(e){this._innerAPI().getSavedCharts(e)},e.prototype.loadChartFromServer=function(e){this._innerAPI().loadChartFromServer(e)},e.prototype.saveChartToServer=function(e,t,i,n){this._innerAPI().saveChartToServer(e,t,i,n)},e.prototype.removeChartFromServer=function(e,t){this._innerAPI().removeChartFromServer(e,t)},e.prototype.onContextMenu=function(e){this._innerAPI().onContextMenu(e)},e.prototype.createButton=function(e){return this._innerWindow().createButton(e)},e.prototype.showNoticeDialog=function(e){this._innerAPI().showNoticeDialog(e)},e.prototype.showConfirmDialog=function(e){this._innerAPI().showConfirmDialog(e)},e.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},e.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},e.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},e.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},e.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},e.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},e.prototype.addCustomCSSFile=function(e){this._innerWindow().addCustomCSSFile(e)},e.prototype.applyOverrides=function(e){this._options=t(this._options,{overrides:e}),this._innerWindow().applyOverrides(e)},e.prototype.applyStudiesOverrides=function(e){this._innerWindow().applyStudiesOverrides(e)},e.prototype.watchList=function(){return this._innerAPI().watchlist()},e.prototype.activeChart=function(){return this._innerAPI().activeChart()},e.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},e.prototype.layout=function(){return this._innerAPI().layout()},e.prototype.setLayout=function(e){this._innerAPI().setLayout(e)},e.prototype._getIFrameElement=function(){var e=document.getElementById(this._id);if(null===e)throw new Error("There is no such iframe");return e},e.prototype._innerAPI=function(){return this._getIFrameElement().contentWindow.tradingViewApi},e.prototype._innerWindow=function(){return this._getIFrameElement().contentWindow},e.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._getIFrameElement().style.height=window.innerHeight+"px")},e.prototype._create=function(){var e=this,t=this._render(),i=document.getElementById(this._options.container_id);if(null===i)throw new Error("There is no such element - #"+this._options.container_id);i.innerHTML=t;var n=this._getIFrameElement();(this._options.autosize||this._options.fullscreen)&&(n.style.width="100%",this._options.fullscreen||(n.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize();n.addEventListener("load",function t(){n.removeEventListener("load",t,!1),n.contentWindow.widgetReady(function(){e._ready=!0;for(var t=0,i=e._readyHandlers;t<i.length;t++)i[t].call(e);n.contentWindow.initializationFinished()})},!1)},e.prototype._render=function(){var e=window;e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter},this._options.saved_data&&(e[this._id].chartContent={json:this._options.saved_data});var t=(this._options.library_path||"")+"static/tv-chart.e816a7a6edc9de3ed709.html#localserver=1&symbol="+encodeURIComponent(this._options.symbol)+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+this._options.toolbar_bg.replace("#",""):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(a()(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(a()(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(a()(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(a()(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.indicators_file_name?"&indicatorsFile="+encodeURIComponent(this._options.indicators_file_name):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+this._options.debug+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+t+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},e}();window.TradingView=window.TradingView||{},window.TradingView=e,e.version=function(){return"1.12 (internal id e816a7a6 @ 2018-03-26 08:21:11.837530)"},e.onready=function(e){window.addEventListener("DOMContentLoaded",e,!1)},e.widget=s,Object.defineProperty(e,"__esModule",{value:!0})},"object"==("undefined"==typeof exports?"undefined":c()(exports))&&void 0!==e?o(exports):"function"==typeof define&&i("nErl")?define(["exports"],o):o(n.TradingView=n.TradingView||{});var h={ws:null,init:function(){var e=window.WebSocket||window.MozWebSocket;this.ws=new e("ws://118.190.201.181:3010")},subscribeKline:function(e,t){var i=this;null===this.ws&&this.init(),this.ws.readyState?this.ws.send(a()(e)):this.ws.onopen=function(t){i.ws.send(a()(e))},this.ws.onmessage=function(e){t(JSON.parse(e.data))}}},_=i("Zrlr"),p=i.n(_),f=i("wxAW"),m=i.n(f),g=function(){function e(t,i){p()(this,e),this._mgr=t,this._configuration=void 0,this._barsPulseUpdater=new v(this,i||1e4),this._enableLogging=!1,this._initializationFinished=!1,this._callbacks={},this._initialize()}return m()(e,[{key:"defaultConfiguration",value:function(){return{supports_search:!0,supports_group_request:!1,supported_resolutions:["1","5","15","30","60","1D","2D","3D","1W","1M"],supports_marks:!0,supports_timescale_marks:!0,supports_time:!0,exchanges:[{value:"",name:"All Exchanges",desc:""}],symbols_types:[{name:"All types",value:""}]}}},{key:"getServerTime",value:function(e){if(this._configuration.supports_time){var t=this;setTimeout(function(){e(t._mgr.getServerTime())},10)}}},{key:"on",value:function(e,t){return this._callbacks.hasOwnProperty(e)||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"_fireEvent",value:function(e,t){if(this._callbacks.hasOwnProperty(e)){for(var i=this._callbacks[e],n=0;n<i.length;++n)i[n](t);this._callbacks[e]=[]}}},{key:"onInitialized",value:function(){this._initializationFinished=!0,this._fireEvent("initialized")}},{key:"_logMessage",value:function(e){this._enableLogging&&console.log((new Date).toLocaleTimeString()+" >> ",e)}},{key:"_initialize",value:function(){var e=this._mgr.getConfig(),t=this.defaultConfiguration();if(e){var i=l()({},t,e);this._setupWithConfiguration(i)}else this._setupWithConfiguration(t)}},{key:"onReady",value:function(e){var t=this;this._configuration?setTimeout(function(){e(t._configuration)},0):this.on("configuration_ready",function(){e(t._configuration)})}},{key:"_setupWithConfiguration",value:function(e){this._configuration=e,this._configuration.exchanges||(this._configuration.exchanges=[]),this._configuration.supports_group_request?console.error(" >> ：Sorry unsupports group request"):(this.onInitialized(),this._fireEvent("configuration_ready"),this._logMessage("Initialized with "+a()(e)))}},{key:"resolveSymbol",value:function(e,t,i){var n=this;if(this._initializationFinished){var o=Date.now();n._logMessage("Resolve requested"),this._configuration.supports_group_request||setTimeout(function(){var s=n._mgr.resolveTVSymbol(e?e.toUpperCase():"");s?function(e){var i=e;n.postProcessSymbolInfo&&(i=n.postProcessSymbolInfo(i)),n._logMessage("Symbol resolved: "+(Date.now()-o)),t(i)}(s):(n._logMessage("Error resolving symbol: "+e),i("unknown_symbol"))},10)}else this.on("initialized",function(){n.resolveSymbol(e,t,i)})}},{key:"searchSymbols",value:function(e,t,i,n){this._configuration.supports_search&&(console.log(" >> 搜索商品：",e,t,i),n([{symbol:"AAFR",full_name:"BTCUSD",description:"",exchange:"",ticker:"",type:0}]))}},{key:"getTimescaleMarks",value:function(e,t,i,n,o){this._configuration.supports_timescale_marks&&(console.log(" >> 获取时间刻度：",e,t,i,o),n([{color:"red",id:"tsm1",label:"A",time:1492041600,tooltip:"test1"}]))}},{key:"getMarks",value:function(e,t,i,n,o){this._configuration.supports_marks&&(console.log(" >> 获取K线标记：",e,t,i,o),n([{color:"red",id:"tsm1",text:"AAA",label:"A",time:1492041600,labelFontColor:"",minSize:28}]))}},{key:"getBars",value:function(e,t,i,n,o,s){if(i>0&&(i+"").length>10)throw new Error(["Got a JS time instead of Unix one.",i,n]);this._mgr.getBars(e.ticker.toUpperCase(),t,i,n,function(e){if(e){var t="no_data"===e.s;if("ok"!==e.s&&!t)return void(s&&s(e.s));var i=e.bars||[];o(i,{noData:t,nextTime:e.nextTime})}else console.warn(["getBars(): error"]),s&&s(" error: ")})}},{key:"subscribeBars",value:function(e,t,i,n,o){console.log("subscribeBars: "+e+", "+t+", "+n),this._barsPulseUpdater.subscribeDataListener(e,t,i,n,o)}},{key:"unsubscribeBars",value:function(e){this._barsPulseUpdater.unsubscribeDataListener(e)}}]),e}(),v=function(){function e(t,i){p()(this,e),this._datafeed=t,this._datafeed._logMessage("DataPulseUpdater init "+i),this._subscribers={},this._requestsPending=0;var n=this;void 0!==i&&i>0&&setInterval(function(){if(!(n._requestsPending>0)){var e=function(e){var t,i=n._subscribers[e],o=i.resolution,s=n._datafeed._mgr.getServerTime(),r=s-n.periodLengthSeconds(o,10);n._requestsPending++,t=i,n._datafeed.getBars(t.symbolInfo,o,r,s,function(i){if(n._requestsPending--,n._subscribers.hasOwnProperty(e)&&0!==i.length){var o=i[i.length-1];if(isNaN(t.lastBarTime)||!(o.time<t.lastBarTime)){var s=t.listeners;if(!isNaN(t.lastBarTime)&&o.time>t.lastBarTime){if(i.length<2)throw new Error("Not enough bars in history for proper pulse update. Need at least 2.");for(var r=i[i.length-2],a=0;a<s.length;++a)s[a](r)}t.lastBarTime=o.time;for(var u=0;u<s.length;++u)s[u](o)}}},function(){n._requestsPending--})};for(var t in n._subscribers)e(t)}},i)}return m()(e,[{key:"unsubscribeDataListener",value:function(e){this._datafeed._logMessage("Unsubscribing "+e),delete this._subscribers[e]}},{key:"subscribeDataListener",value:function(e,t,i,n){this._datafeed._logMessage("Subscribing "+n),this._subscribers.hasOwnProperty(n)||(this._subscribers[n]={symbolInfo:e,resolution:t,lastBarTime:NaN,listeners:[]}),this._subscribers[n].listeners.push(i)}},{key:"periodLengthSeconds",value:function(e,t){return 24*("D"===e?t:"M"===e?31*t:"W"===e?7*t:t*e/1440)*60*60}}]),e}(),y=g,b={widget:null,dataFeed:null,dataCache:{},getBarTimer:null,init:function(e){var t=this;this.dataFeed=new y(this),this.widget=new TradingView.widget({autosize:!0,symbol:e.symbol,interval:e.interval,container_id:"tv_chart_container",datafeed:this.dataFeed,library_path:"/static/charting_library/",drawings_access:{type:"black",tools:[{name:"Regression Trend"}]},enabled_features:[],numeric_formatting:{decimal_sign:"."},timezone:"Asia/Shanghai",locale:"zh",debug:!0}),this.widget.onChartReady(function(){t.widget.chart().createStudy("MA Cross",!1,!1,[30,120])})},getBars:function(e,t,i,n,o){var s=this,r=void 0,a=this.dataCache[e];a&&(r=a[t]),"D"===t&&(t="1D"),this.getBarTimer&&clearTimeout(this.getBarTimer);var u,l=1e3*i,d=1e3*n;r?function(r){var a=[],u=0;r.forEach(function(e){var t=e.time;t>=l&&t<=d&&(a.push(e),u++)},s),u>0?(a.sort(function(e,t){return e.time>t.time?1:-1}),o&&o({s:"ok",bars:a})):o&&o({s:"no_data"});var c={resolution:t,symbol:e,type:"updata",from:i,to:n};h.subscribeKline(c,s.onUpdateData.bind(s))}(r):(u={resolution:t,symbol:e,type:"kline",from:i,to:n},h.subscribeKline(u,s.onUpdateData.bind(s)),s.getBarTimer=setTimeout(function(){s.getBars(e,t,i,n,o)},300))},getConfig:function(){return{supports_search:!0,supports_group_request:!1,supports_marks:!0,supports_timescale_marks:!0,supports_time:!0}},getServerTime:function(){return parseInt(Date.now()/1e3)},resolveTVSymbol:function(e){return{name:"AA","exchange-traded":"","exchange-listed":"",timezone:"Asia/Shanghai",minmov:1,minmov2:0,pointvalue:1,fractional:!1,session:"24x7",has_intraday:!0,has_no_volume:!1,description:"AA",pricescale:1,ticker:"AA",supported_resolutions:["1","5","15","30","60","1D","2D","3D","1W","1M"]}},onUpdateData:function(e){var t=this;if(!e.kline)return!1;this.dataCache[e.symbol]||(this.dataCache[e.symbol]={}),this.dataCache[e.symbol][e.resolution]||(this.dataCache[e.symbol][e.resolution]=[]),e.kline.length&&e.kline.forEach(function(i){t.dataCache[e.symbol][e.resolution].push(i)})}},w={mounted:function(){b.init({symbol:"AA",interval:"1D"})}},C={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"tv_chart_container"}})},staticRenderFns:[]};var I={name:"App",components:{TradeView:i("VU/8")(w,C,!1,function(e){i("dO/5")},"data-v-28d1e348",null).exports}},A={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("TradeView")],1)},staticRenderFns:[]},S=i("VU/8")(I,A,!1,null,null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:S},template:"<App/>"})},"dO/5":function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.08d22ad22159834de6cd.js.map